[gd_scene load_steps=22 format=2]

[ext_resource path="res://prefabs/Level_prefab/BaseLevel.tscn" type="PackedScene" id=1]
[ext_resource path="res://prefabs/SceneObjects/buildings/Building_tall.tscn" type="PackedScene" id=2]
[ext_resource path="res://prefabs/SceneObjects/buildings/House_square.tscn" type="PackedScene" id=3]
[ext_resource path="res://prefabs/SceneObjects/Pickup_items/HealingPickup.tscn" type="PackedScene" id=4]
[ext_resource path="res://prefabs/SceneObjects/obstacles/Box.tscn" type="PackedScene" id=5]
[ext_resource path="res://prefabs/SceneObjects/test_objects/wall_plane_front.tscn" type="PackedScene" id=6]
[ext_resource path="res://prefabs/SceneObjects/test_objects/wall_plane_back.tscn" type="PackedScene" id=7]
[ext_resource path="res://prefabs/SceneObjects/obstacles/Open_bin.tscn" type="PackedScene" id=8]
[ext_resource path="res://player/Player.tscn" type="PackedScene" id=9]
[ext_resource path="res://prefabs/SceneObjects/Pickup_items/pickup_item.tscn" type="PackedScene" id=10]
[ext_resource path="res://Test_sprites/floor.png" type="Texture" id=12]
[ext_resource path="res://prefabs/Event/Event.tscn" type="PackedScene" id=13]
[ext_resource path="res://prefabs/enemySpawner.tscn" type="PackedScene" id=14]
[ext_resource path="res://prefabs/Event/Dialog_event.tscn" type="PackedScene" id=15]
[ext_resource path="res://enemies/static/static_base.tscn" type="PackedScene" id=17]

[sub_resource type="ConvexPolygonShape2D" id=1]
points = PoolVector2Array( -8.62218, 0, 0, -4.34946, 8.56552, -0.210382, 0, 4.20931 )

[sub_resource type="ConvexPolygonShape2D" id=2]
points = PoolVector2Array( -8.566, 0, 0, -4.283, 0, 4.283 )

[sub_resource type="ConvexPolygonShape2D" id=3]
points = PoolVector2Array( 0, 4.283, 0, -4.283, 8.56605, 0 )

[sub_resource type="ConvexPolygonShape2D" id=4]
points = PoolVector2Array( -8.566, 0, 0, -4.283, 8.566, 0 )

[sub_resource type="ConvexPolygonShape2D" id=5]
points = PoolVector2Array( 8.566, 0, 0, 4.283, -8.566, 0, -8, 0 )

[sub_resource type="TileSet" id=6]
0/name = "Obstacle"
0/texture = ExtResource( 12 )
0/tex_offset = Vector2( 0, 0 )
0/modulate = Color( 1, 1, 1, 1 )
0/region = Rect2( 0, 0, 64, 32 )
0/tile_mode = 0
0/occluder_offset = Vector2( 32, 16 )
0/navigation_offset = Vector2( 32, 16 )
0/shape_offset = Vector2( 32, 16 )
0/shape_transform = Transform2D( 3.719, 0, 0, 3.719, 32, 16 )
0/shape = SubResource( 1 )
0/shape_one_way = false
0/shape_one_way_margin = 1.0
0/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 1 ),
"shape_transform": Transform2D( 3.719, 0, 0, 3.719, 32, 16 )
} ]
0/z_index = 0
1/name = "left"
1/texture = ExtResource( 12 )
1/tex_offset = Vector2( -15.73, 0 )
1/modulate = Color( 1, 1, 1, 1 )
1/region = Rect2( 0, 0, 32, 32 )
1/tile_mode = 0
1/occluder_offset = Vector2( 16, 16 )
1/navigation_offset = Vector2( 16, 16 )
1/shape_offset = Vector2( 16.0145, 16 )
1/shape_transform = Transform2D( 3.71875, 0, 0, 3.71875, 16.0145, 16 )
1/shape = SubResource( 2 )
1/shape_one_way = false
1/shape_one_way_margin = 1.0
1/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 2 ),
"shape_transform": Transform2D( 3.71875, 0, 0, 3.71875, 16.0145, 16 )
} ]
1/z_index = 0
2/name = "right"
2/texture = ExtResource( 12 )
2/tex_offset = Vector2( 16, 0 )
2/modulate = Color( 1, 1, 1, 1 )
2/region = Rect2( 32, 0, 32, 32 )
2/tile_mode = 0
2/occluder_offset = Vector2( 16, 16 )
2/navigation_offset = Vector2( 16, 16 )
2/shape_offset = Vector2( 16.2194, 16 )
2/shape_transform = Transform2D( 3.71875, 0, 0, 3.71875, 16.2194, 16 )
2/shape = SubResource( 3 )
2/shape_one_way = false
2/shape_one_way_margin = 1.0
2/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 3 ),
"shape_transform": Transform2D( 3.71875, 0, 0, 3.71875, 16.2194, 16 )
} ]
2/z_index = 0
3/name = "up"
3/texture = ExtResource( 12 )
3/tex_offset = Vector2( 0, -8 )
3/modulate = Color( 1, 1, 1, 1 )
3/region = Rect2( 0, 0, 64, 16 )
3/tile_mode = 0
3/occluder_offset = Vector2( 32, 8 )
3/navigation_offset = Vector2( 32, 8 )
3/shape_offset = Vector2( 32.2194, 8 )
3/shape_transform = Transform2D( 3.71875, 0, 0, 3.71875, 32.2194, 8 )
3/shape = SubResource( 4 )
3/shape_one_way = false
3/shape_one_way_margin = 1.0
3/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 4 ),
"shape_transform": Transform2D( 3.71875, 0, 0, 3.71875, 32.2194, 8 )
} ]
3/z_index = 0
4/name = "down"
4/texture = ExtResource( 12 )
4/tex_offset = Vector2( 0, 8 )
4/modulate = Color( 1, 1, 1, 1 )
4/region = Rect2( 0, 16, 64, 16 )
4/tile_mode = 0
4/occluder_offset = Vector2( 32, 8 )
4/navigation_offset = Vector2( 32, 8 )
4/shape_offset = Vector2( 32.2194, 8 )
4/shape_transform = Transform2D( 3.71875, 0, 0, 3.71875, 32.2194, 8 )
4/shape = SubResource( 5 )
4/shape_one_way = false
4/shape_one_way_margin = 1.0
4/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 5 ),
"shape_transform": Transform2D( 3.71875, 0, 0, 3.71875, 32.2194, 8 )
} ]
4/z_index = 0

[node name="Main" instance=ExtResource( 1 )]

[node name="Collision" type="TileMap" parent="." index="1" groups=[
"scenario_collisions",
]]
mode = 1
tile_set = SubResource( 6 )
cell_size = Vector2( 64, 32 )
centered_textures = true
collision_layer = 7
collision_mask = 7
format = 1
tile_data = PoolIntArray( -2752545, 0, 0, -2752543, 0, 0, -2752541, 0, 0, -2752539, 0, 0, -2621473, 0, 0, -2621467, 0, 0, -2555937, 0, 0, -2555931, 0, 0, -2424865, 0, 0, -2424859, 0, 0, -2293793, 0, 0, -2293791, 0, 0, -2293789, 0, 0, -2293787, 0, 0, -2162718, 0, 0, -2162716, 0, 0, -2162714, 0, 0, -2031646, 0, 0, -2031644, 0, 0, -2031642, 0, 0, -1900574, 0, 0, -1900570, 0, 0, -1900568, 0, 0, -1769502, 0, 0, -1769498, 0, 0, -1638430, 0, 0, -1638428, 0, 0, -1638426, 0, 0, 589815, 0, 0, 655351, 0, 0, 655352, 0, 0, 655353, 0, 0, 655354, 0, 0, 589829, 0, 0, 589830, 0, 0, 720887, 0, 0, 720890, 0, 0, 786423, 0, 0, 786425, 0, 0, 786426, 0, 0, 851959, 0, 0, 851961, 0, 0, 851962, 0, 0, 917496, 0, 0, 917497, 0, 0, 917498, 0, 0, 917525, 2, 0, 917529, 1, 0, 1114109, 0, 0, 1048579, 0, 0, 1179645, 0, 0, 1114115, 0, 0, 1245181, 0, 0, 1179651, 0, 0, 1179671, 3, 0, 1310717, 0, 0, 1245187, 0, 0, 1245211, 4, 0, 1376253, 0, 0, 1310723, 0, 0, 1441789, 0, 0, 1376259, 0, 0, 1507325, 0, 0, 1441795, 0, 0, 1572861, 0, 0, 1507331, 0, 0, 1638397, 0, 0, 1572867, 0, 0, 1703933, 0, 0, 1638403, 0, 0, 1703939, 0, 0 )

[node name="Floor" parent="." index="2"]
scale = Vector2( 0.564405, 0.564405 )
tile_data = PoolIntArray( -655366, 0, 0, -655365, 0, 0, -655364, 0, 0, -655363, 0, 0, -655362, 0, 0, -655361, 0, 0, -720896, 0, 0, -720895, 0, 0, -589831, 5, 0, -589830, 5, 0, -589829, 5, 0, -589828, 5, 0, -589827, 5, 0, -589826, 5, 0, -589825, 0, 0, -655360, 0, 0, -655359, 536870915, 0, -524294, 1073741827, 0, -524293, 1073741827, 0, -524292, 1073741827, 0, -524291, 5, 0, -524290, 5, 0, -524289, 0, 0, -589824, 3, 0, -458758, 0, 0, -458757, 0, 0, -458756, 0, 0, -458755, 3, 0, -458754, 5, 0, -458753, 0, 0, -524288, 3, 0, -393222, 0, 0, -393221, 0, 0, -393220, 0, 0, -393219, 3, 0, -393218, 5, 0, -393217, 0, 0, -458752, 3, 0, -327685, 0, 0, -327684, 0, 0, -327683, 3, 0, -327682, 5, 0, -327681, 0, 0, -393216, 5, 0, -393215, 1073741827, 0, -262148, 0, 0, -262147, 3, 0, -262146, 5, 0, -262145, 0, 0, -327680, 0, 0, -327679, 0, 0, -327678, 0, 0 )

[node name="YSort" parent="." index="6"]
z_index = 1

[node name="Player" parent="YSort" index="0" instance=ExtResource( 9 )]

[node name="PickupItem" parent="YSort" index="1" groups=[
"pickup",
] instance=ExtResource( 10 )]
position = Vector2( 224, 160 )

[node name="HealingPickup" parent="YSort" index="2" instance=ExtResource( 4 )]
position = Vector2( 136, 229 )
z_index = 0
script = null

[node name="test" parent="YSort" index="3" instance=ExtResource( 17 )]
position = Vector2( -128, -32 )

[node name="Building_tall" parent="YSort" index="4" instance=ExtResource( 2 )]
position = Vector2( 16, -464 )
collision_layer = 7

[node name="Building_tall2" parent="YSort" index="5" instance=ExtResource( 2 )]
position = Vector2( 928, -683 )
scale = Vector2( -1, 1 )
collision_layer = 7

[node name="House_square" parent="YSort" index="6" instance=ExtResource( 3 )]
position = Vector2( 144, -531 )
collision_layer = 7

[node name="House_square2" parent="YSort" index="7" instance=ExtResource( 3 )]
position = Vector2( 792, -755 )
scale = Vector2( -1, 1 )
collision_layer = 7

[node name="Box" parent="YSort" index="8" instance=ExtResource( 5 )]
position = Vector2( 720, -419 )
collision_layer = 7

[node name="wall_plane" parent="YSort" index="9" instance=ExtResource( 6 )]
position = Vector2( 720, 261 )
collision_layer = 7

[node name="wall_plane2" parent="YSort" index="10" instance=ExtResource( 6 )]
position = Vector2( 544, 261 )
scale = Vector2( -1, 1 )
collision_layer = 7

[node name="wall_plane_back" parent="YSort" index="11" instance=ExtResource( 7 )]
position = Vector2( 544, 237 )
collision_layer = 7

[node name="wall_plane_back2" parent="YSort" index="12" instance=ExtResource( 7 )]
position = Vector2( 720, 237 )
scale = Vector2( -1, 1 )
collision_layer = 7

[node name="Open_bin" parent="YSort" index="13" instance=ExtResource( 8 )]
position = Vector2( -32, -163 )
pickups = [ "HealingPickup", "WeaponPickup" ]

[node name="BgmStreamPlayer" parent="." index="7"]
soundtrack_name = "Ambiental_city"

[node name="Event" parent="Events" index="0" instance=ExtResource( 13 )]

[node name="EventDetector" parent="Events/Event" index="0"]
tile_data = PoolIntArray( 1114110, 5, 0, 1114111, 5, 0, 1048576, 5, 0, 1048577, 5, 0, 1048578, 5, 0, 1376254, 0, 0, 1376255, 0, 0, 1310720, 0, 0, 1310721, 0, 0, 1310722, 0, 0 )

[node name="Spawners" parent="Events/Event" index="1"]
position = Vector2( -736, 368 )

[node name="enemySpawner" parent="Events/Event/Spawners" index="0" instance=ExtResource( 14 )]
position = Vector2( 320, -176 )
spawnOf = "enemy_smarter"
maxEnemies = 2

[node name="enemySpawner2" parent="Events/Event/Spawners" index="1" instance=ExtResource( 14 )]
position = Vector2( 320, -176 )
spawnOf = "ghost"
maxEnemies = 0

[node name="First_call" parent="Dialog_Events" index="0" instance=ExtResource( 15 )]
[connection signal="tree_exiting" from="ScreenCanvas/Show_keys" to="Scripting" method="_on_Show_keys_tree_exiting"]

[editable path="ScreenCanvas"]

[editable path="Events/Event"]
